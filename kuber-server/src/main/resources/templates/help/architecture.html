<!DOCTYPE html>
<!--
  ~ Copyright © 2025-2030, All Rights Reserved
  ~ Ashutosh Sinha | Email: ajsinha@gmail.com
  ~ Patent Pending
  -->
<html xmlns:th="http://www.thymeleaf.org">
<head th:replace="~{layout :: head('Architecture')}"></head>
<body class="d-flex flex-column min-vh-100">

<nav th:replace="~{layout :: navbar}"></nav>

<main class="flex-fill">
    <div class="container-fluid py-4">
        <!-- Breadcrumb -->
        <nav aria-label="breadcrumb" class="mb-4">
            <ol class="breadcrumb">
                <li class="breadcrumb-item"><a href="/help"><i class="fas fa-book me-1"></i>Help</a></li>
                <li class="breadcrumb-item active" aria-current="page">Architecture</li>
            </ol>
        </nav>

        <!-- Content -->
        <div class="row">
            <div class="col-lg-10 mx-auto">
                <h1 class="display-5 mb-4"><i class="fas fa-sitemap me-3 text-primary"></i>System Architecture</h1>
                
                <div class="alert alert-info">
                    <i class="fas fa-info-circle me-2"></i>
                    <strong>Version 1.7.5</strong> - This document describes the architecture of <span th:text="${appName} ?: 'Kuber'">Kuber</span> Distributed Cache, 
                    an enterprise-grade caching system with Redis protocol compatibility and advanced features.
                </div>

                <!-- Table of Contents -->
                <div class="card mb-5">
                    <div class="card-header bg-dark text-white">
                        <h5 class="mb-0"><i class="fas fa-list me-2"></i>Table of Contents</h5>
                    </div>
                    <div class="card-body">
                        <div class="row">
                            <div class="col-md-6">
                                <ol>
                                    <li><a href="#overview">Overview &amp; Key Principles</a></li>
                                    <li><a href="#high-level">High-Level Architecture</a></li>
                                    <li><a href="#startup-orchestration">Startup Orchestration</a></li>
                                    <li><a href="#hybrid-memory">Hybrid Memory Architecture</a></li>
                                    <li><a href="#core-components">Core Components</a></li>
                                    <li><a href="#persistence">Persistence Layer</a></li>
                                </ol>
                            </div>
                            <div class="col-md-6">
                                <ol start="7">
                                    <li><a href="#protocol">Protocol Design</a></li>
                                    <li><a href="#replication">Replication Architecture</a></li>
                                    <li><a href="#event-publishing">Event Publishing</a> <span class="badge bg-warning text-dark">v1.3.2</span></li>
                                    <li><a href="#request-response">Request/Response Messaging</a> <span class="badge bg-success">v1.7.1</span></li>
                                    <li><a href="#security">Security Architecture</a></li>
                                    <li><a href="#data-flow">Data Flow</a></li>
                                    <li><a href="#deployment">Deployment Patterns</a></li>
                                </ol>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- 1. Overview -->
                <section id="overview" class="mb-5">
                    <h2 class="border-bottom pb-2 mb-4"><i class="fas fa-eye me-2 text-primary"></i>1. Overview</h2>
                    <p><span th:text="${appName} ?: 'Kuber'">Kuber</span> is an enterprise-grade distributed caching system designed for high-performance, 
                    scalability, and flexibility. It provides Redis protocol compatibility while extending functionality with advanced features 
                    like region-based partitioning, JSON document queries, and pluggable persistence.</p>
                    
                    <h4 class="mt-4">Key Architectural Principles</h4>
                    <table class="table table-bordered">
                        <thead class="table-light">
                            <tr><th>Principle</th><th>Description</th></tr>
                        </thead>
                        <tbody>
                            <tr><td><strong>Protocol Compatibility</strong></td><td>Full Redis RESP protocol support for drop-in replacement</td></tr>
                            <tr><td><strong>Hybrid Memory</strong></td><td>All keys in memory (KeyIndex), values can overflow to disk (v1.2.1+)</td></tr>
                            <tr><td><strong>Pluggable Persistence</strong></td><td>Configurable backends: RocksDB, LMDB, MongoDB, PostgreSQL, SQLite, Memory</td></tr>
                            <tr><td><strong>Region Isolation</strong></td><td>Logical namespaces for multi-tenant data organization</td></tr>
                            <tr><td><strong>High Availability</strong></td><td>Primary/Secondary replication via ZooKeeper</td></tr>
                            <tr><td><strong>Mandatory Security</strong></td><td>All clients must authenticate with username and password</td></tr>
                            <tr><td><strong>Off-Heap Keys</strong></td><td>Optional DRAM-based key storage outside Java heap (v1.2.2+)</td></tr>
                        </tbody>
                    </table>
                </section>

                <!-- 2. High-Level Architecture -->
                <section id="high-level" class="mb-5">
                    <h2 class="border-bottom pb-2 mb-4"><i class="fas fa-layer-group me-2 text-success"></i>2. High-Level Architecture</h2>
                    <pre class="bg-dark text-light p-4 rounded" style="font-size: 0.75rem; overflow-x: auto;">
┌─────────────────────────────────────────────────────────────────────────────┐
│                              CLIENT LAYER                                    │
├──────────────────┬──────────────────┬────────────────────┬──────────────────┤
│  Python Client   │  Java Client     │   C# / .NET Client │  Messaging       │
│  (Redis + REST)  │  (Redis + REST)  │   (Redis + REST)   │  (Kafka/MQ)      │
│ (Auth Required)  │ (Auth Required)  │  (Auth Required)   │  (API Key)       │
└────────┬─────────┴────────┬─────────┴─────────┬──────────┴────────┬─────────┘
         │                  │                   │                    │
         │ Redis/HTTP       │ Redis/HTTP        │ Redis/HTTP         │ Broker
         ▼                  ▼                   ▼                    ▼
┌─────────────────────────────────────────────────────────────────────────────┐
│                           PROTOCOL LAYER                                     │
├─────────────────────────────────┬──────────────────────┬────────────────────┤
│       Redis Protocol Server     │  REST API Server     │  Message Broker    │
│       (Apache MINA - Port 6380) │  (Spring Boot 8080)  │  Adapter (v1.7.1)  │
└─────────────────┬───────────────┴──────────┬───────────┴──────────┬─────────┘
                  │                                   │
                  ▼                                   ▼
┌─────────────────────────────────────────────────────────────────────────────┐
│                            SERVICE LAYER                                     │
├─────────────────────────────────────────────────────────────────────────────┤
│  ┌─────────────┐  ┌─────────────┐  ┌─────────────┐  ┌─────────────────────┐ │
│  │   Cache     │  │   Region    │  │    JSON     │  │   Authentication    │ │
│  │  Service    │  │   Manager   │  │   Service   │  │      Service        │ │
│  └──────┬──────┘  └──────┬──────┘  └──────┬──────┘  └──────────┬──────────┘ │
│         │                │                │                     │           │
│         └────────────────┴────────┬───────┴─────────────────────┘           │
│                                   ▼                                          │
│  ┌──────────────────────────────────────────────────────────────────────┐   │
│  │               Hybrid Memory Architecture (v1.2.1+)                    │   │
│  │  ┌──────────────────┐    ┌─────────────────────────────────────┐    │   │
│  │  │  KeyIndex        │    │     Value Cache (Caffeine)          │    │   │
│  │  │  (All keys in    │◄──►│     (Hot values in memory)          │    │   │
│  │  │   memory always) │    │                                     │    │   │
│  │  └──────────────────┘    └─────────────────────────────────────┘    │   │
│  └──────────────────────────────────────────────────────────────────────┘   │
└───────────────────────────────────┬─────────────────────────────────────────┘
                                    │
                                    ▼
┌─────────────────────────────────────────────────────────────────────────────┐
│                         PERSISTENCE LAYER                                    │
├─────────────────────────────────────────────────────────────────────────────┤
│  ┌────────┐ ┌──────┐ ┌────────┐ ┌──────────┐ ┌────────┐ ┌────────┐         │
│  │RocksDB │ │ LMDB │ │ SQLite │ │PostgreSQL│ │MongoDB │ │In-Memory│         │
│  │(default)│ │      │ │        │ │          │ │        │ │        │         │
│  └────────┘ └──────┘ └────────┘ └──────────┘ └────────┘ └────────┘         │
└─────────────────────────────────────────────────────────────────────────────┘
                                    │
                                    ▼
┌─────────────────────────────────────────────────────────────────────────────┐
│                       REPLICATION LAYER (Optional)                           │
├─────────────────────────────────────────────────────────────────────────────┤
│         ┌─────────┐         ┌─────────┐         ┌─────────┐                 │
│         │ Primary │ ──────► │Secondary│ ──────► │Secondary│                 │
│         │  Node   │         │  Node 1 │         │  Node 2 │                 │
│         └────┬────┘         └─────────┘         └─────────┘                 │
│              │                                                               │
│              └──────────────► ZooKeeper Coordination ◄──────────────────────│
└─────────────────────────────────────────────────────────────────────────────┘</pre>
                </section>

                <!-- 3. Startup Orchestration -->
                <section id="startup-orchestration" class="mb-5">
                    <h2 class="border-bottom pb-2 mb-4"><i class="fas fa-play-circle me-2 text-success"></i>3. Startup Orchestration</h2>
                    <p>Kuber uses a <code>StartupOrchestrator</code> to ensure correct initialization order and prevent race conditions 
                    during application startup. This is critical for data integrity and system stability.</p>
                    
                    <h4 class="mt-4">The Problem</h4>
                    <p>Without proper orchestration, several race conditions can occur:</p>
                    <table class="table table-bordered">
                        <thead class="table-light">
                            <tr><th>Race Condition</th><th>Description</th><th>Impact</th></tr>
                        </thead>
                        <tbody>
                            <tr><td><strong>Early Data Recovery</strong></td><td>Persistence recovery starts before Spring context is fully loaded</td><td>Missing bean dependencies</td></tr>
                            <tr><td><strong>Premature Connections</strong></td><td>Redis server accepts connections before cache is ready</td><td>Clients receive errors</td></tr>
                            <tr><td><strong>Autoload Race</strong></td><td>Files processed before persistence recovery completes</td><td>Data overwrites</td></tr>
                            <tr><td><strong>Scheduled Conflicts</strong></td><td>@Scheduled methods run before initialization</td><td>Operations on uninitialized caches</td></tr>
                        </tbody>
                    </table>
                    
                    <h4 class="mt-4">Startup Sequence (v1.5.0)</h4>
                    <div class="alert alert-info mb-3">
                        <i class="fas fa-bolt me-2"></i>
                        <strong>v1.5.0:</strong> All startup operations (compaction, loading) run sequentially for data consistency.
                        This ensures no concurrent operations that could cause corruption.
                    </div>
                    <pre class="bg-dark text-white p-3 rounded">
┌─────────────────────────────────────────────────────────────────────────────┐
│                         STARTUP SEQUENCE (v1.5.0)                            │
├─────────────────────────────────────────────────────────────────────────────┤
│                                                                              │
│  ┌──────────────────────────────────────────────────────────────────────┐   │
│  │ PHASE 0: Spring Boot Initialization                                  │   │
│  │ • Spring context loads all beans                                     │   │
│  │ • Dependency injection completes                                     │   │
│  │ • ApplicationReadyEvent fires                                        │   │
│  └──────────────────────────────────────────────────────────────────────┘   │
│                                    │                                         │
│                                    ▼                                         │
│  ┌──────────────────────────────────────────────────────────────────────┐   │
│  │ STABILIZATION: Wait 10 seconds                                       │   │
│  │ • Allows all Spring beans to fully initialize                        │   │
│  │ • Ensures async initializations complete                             │   │
│  └──────────────────────────────────────────────────────────────────────┘   │
│                                    │                                         │
│                                    ▼                                         │
│  ┌──────────────────────────────────────────────────────────────────────┐   │
│  │ PHASE 1: Persistence Maintenance (CONCURRENT)                        │   │
│  │ • RocksDB: Full compaction of all region databases (parallel)        │   │
│  │ • SQLite: VACUUM on all region database files (parallel)             │   │
│  │ • LMDB/Other: Skip (not required)                                    │   │
│  └──────────────────────────────────────────────────────────────────────┘   │
│                                    │                                         │
│                                    ▼ (2 second wait)                         │
│  ┌──────────────────────────────────────────────────────────────────────┐   │
│  │ PHASE 2: Cache Service Initialization (CONCURRENT)                   │   │
│  │ • Load regions from persistence store (parallel per region)          │   │
│  │ • Recover all cached data from disk/database                         │   │
│  │ • Build KeyIndex for each region (all keys in memory)                │   │
│  │ • Mark CacheService as initialized                                   │   │
│  └──────────────────────────────────────────────────────────────────────┘   │
│                                    │                                         │
│                                    ▼ (2 second wait)                         │
│  ┌──────────────────────────────────────────────────────────────────────┐   │
│  │ PHASE 3: Redis Protocol Server                                       │   │
│  │ • Bind to configured port (default: 6380)                            │   │
│  │ • Start accepting client connections                                 │   │
│  │ • Clients can now safely connect with full data available            │   │
│  └──────────────────────────────────────────────────────────────────────┘   │
│                                    │                                         │
│                                    ▼ (2 second wait)                         │
│  ┌──────────────────────────────────────────────────────────────────────┐   │
│  │ PHASE 4: Autoload Service                                            │   │
│  │ • Initialize inbox/outbox directories                                │   │
│  │ • Start file watcher for new data files                              │   │
│  │ • Process any pending files in inbox                                 │   │
│  └──────────────────────────────────────────────────────────────────────┘   │
│                                    │                                         │
│                                    ▼ (2 second wait)                         │
│  ┌──────────────────────────────────────────────────────────────────────┐   │
│  │ SYSTEM READY: Final Announcement                                     │   │
│  │ • Mark startup as complete                                           │   │
│  │ • Log system ready message                                           │   │
│  └──────────────────────────────────────────────────────────────────────┘   │
│                                                                              │
└─────────────────────────────────────────────────────────────────────────────┘</pre>
                    
                    <h4 class="mt-4">Scheduled Task Protection</h4>
                    <p>All <code>@Scheduled</code> methods check for cache initialization before executing:</p>
                    <table class="table table-bordered">
                        <thead class="table-light">
                            <tr><th>Service</th><th>Method</th><th>Protection</th></tr>
                        </thead>
                        <tbody>
                            <tr><td>CacheService</td><td>cleanupExpiredEntries()</td><td><code>initialized.get()</code></td></tr>
                            <tr><td>MemoryWatcherService</td><td>checkMemoryUsage()</td><td><code>cacheService.isInitialized()</code></td></tr>
                            <tr><td>PersistenceExpirationService</td><td>cleanupExpiredEntries()</td><td><code>cacheService.isInitialized()</code></td></tr>
                            <tr><td>RocksDbCompactionService</td><td>scheduledCompaction()</td><td><code>enabled.get()</code></td></tr>
                        </tbody>
                    </table>
                    
                    <h4 class="mt-4">Startup Logging</h4>
                    <p>The orchestrator provides clear visual logging of each phase:</p>
                    <pre class="bg-dark text-white p-3 rounded" style="font-size: 0.85rem;">
╔════════════════════════════════════════════════════════════════════╗
║  Spring context ready - starting initialization sequence...        ║
╚════════════════════════════════════════════════════════════════════╝
Waiting 10 seconds for Spring context stabilization...

╔════════════════════════════════════════════════════════════════════╗
║  Phase 1: Persistence Maintenance                                  ║
║           Running database compaction/vacuum...                    ║
╚════════════════════════════════════════════════════════════════════╝
Persistence maintenance completed successfully in 523 ms

╔════════════════════════════════════════════════════════════════════╗
║  Phase 2: Cache Service Initialization                             ║
║           Recovering data from persistence store...                ║
╚════════════════════════════════════════════════════════════════════╝
Cache service initialization completed in 1234 ms

╔════════════════════════════════════════════════════════════════════╗
║  Phase 3: Redis Protocol Server                                    ║
║           Starting server to accept client connections...          ║
╚════════════════════════════════════════════════════════════════════╝

╔════════════════════════════════════════════════════════════════════╗
║  Phase 4: Autoload Service                                         ║
║           Starting file monitoring and processing...               ║
╚════════════════════════════════════════════════════════════════════╝

╔════════════════════════════════════════════════════════════════════╗
║   SYSTEM READY - Version 1.7.5                                     ║
║   ✓ Persistence maintenance: complete                              ║
║   ✓ Cache service: initialized                                     ║
║   ✓ Redis server: accepting connections                            ║
║   ✓ Autoload service: running                                      ║
╚════════════════════════════════════════════════════════════════════╝</pre>
                </section>

                <!-- 4. Hybrid Memory Architecture -->
                <section id="hybrid-memory" class="mb-5">
                    <h2 class="border-bottom pb-2 mb-4"><i class="fas fa-memory me-2 text-info"></i>4. Hybrid Memory Architecture</h2>
                    <p>Introduced in v1.2.1, the hybrid memory architecture ensures <strong>all keys are always in memory</strong> 
                    while values can overflow to disk. This provides O(1) key existence checks without disk I/O.</p>
                    
                    <div class="row">
                        <div class="col-md-6">
                            <div class="card h-100">
                                <div class="card-header bg-primary text-white">KeyIndex (Per Region)</div>
                                <div class="card-body">
                                    <ul class="mb-0">
                                        <li>Stores ALL key metadata in memory</li>
                                        <li>Tracks: key, TTL, value location, access stats</li>
                                        <li>EXISTS: O(1) pure memory lookup</li>
                                        <li>KEYS: O(n) memory scan, never disk</li>
                                        <li>DBSIZE: O(1) instant count</li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="card h-100">
                                <div class="card-header bg-success text-white">Value Cache (Caffeine)</div>
                                <div class="card-body">
                                    <ul class="mb-0">
                                        <li>Stores HOT values in memory</li>
                                        <li>LRU eviction when capacity reached</li>
                                        <li>Evicted values still on disk</li>
                                        <li>Cache miss loads from persistence</li>
                                        <li>Write-through to persistence</li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="alert alert-info mt-4">
                        <h5><i class="fas fa-microchip me-2"></i>Off-Heap Key Index - Segmented Buffers (v1.3.2)</h5>
                        <p>Store keys in direct memory (DRAM) outside Java heap for zero GC pressure.</p>
                        <div class="row mt-3">
                            <div class="col-md-6">
                                <strong>Architecture:</strong>
                                <ul class="mb-0">
                                    <li>Multiple 1GB ByteBuffer segments</li>
                                    <li>Supports >2GB total per region</li>
                                    <li>Auto-growth as data increases</li>
                                    <li>Automatic compaction when fragmented</li>
                                </ul>
                            </div>
                            <div class="col-md-6">
                                <strong>Configuration:</strong>
                                <pre class="bg-dark text-light p-2 rounded small mb-0">kuber.cache.off-heap-key-index=true
kuber.cache.off-heap-key-index-initial-size-mb=16
kuber.cache.off-heap-key-index-max-size-mb=8192</pre>
                            </div>
                        </div>
                    </div>
                    
                    <h4 class="mt-4">Off-Heap Memory Layout</h4>
                    <p>Each key entry uses a compact binary format in off-heap memory:</p>
                    <table class="table table-bordered table-sm">
                        <thead class="table-light">
                            <tr><th>Bytes</th><th>Field</th><th>Description</th></tr>
                        </thead>
                        <tbody>
                            <tr><td>2</td><td>keyLength</td><td>Length of key in bytes (short)</td></tr>
                            <tr><td>variable</td><td>keyBytes</td><td>UTF-8 encoded key string</td></tr>
                            <tr><td>8</td><td>expiresAt</td><td>Expiration timestamp (long, -1 = never)</td></tr>
                            <tr><td>1</td><td>location</td><td>Value location (0=MEMORY, 1=DISK, 2=BOTH)</td></tr>
                            <tr><td>4</td><td>valueSize</td><td>Size of value in bytes (int)</td></tr>
                            <tr><td>8</td><td>lastAccess</td><td>Last access timestamp (long)</td></tr>
                            <tr><td>4</td><td>accessCount</td><td>Number of accesses (int)</td></tr>
                        </tbody>
                    </table>
                    
                    <h4 class="mt-4">Performance Comparison</h4>
                    <table class="table table-bordered">
                        <thead class="table-light">
                            <tr><th>Operation</th><th>Before v1.2.1</th><th>After v1.2.1</th><th>Improvement</th></tr>
                        </thead>
                        <tbody>
                            <tr><td>EXISTS</td><td>May hit disk</td><td>Pure memory O(1)</td><td>10-100x faster</td></tr>
                            <tr><td>KEYS pattern</td><td>May hit disk</td><td>Pure memory scan</td><td>10-100x faster</td></tr>
                            <tr><td>DBSIZE</td><td>Count iteration</td><td>O(1) from index</td><td>Instant</td></tr>
                            <tr><td>Negative lookup</td><td>Disk check</td><td>Memory check</td><td>No disk I/O</td></tr>
                        </tbody>
                    </table>
                </section>

                <!-- 4. Core Components -->
                <section id="core-components" class="mb-5">
                    <h2 class="border-bottom pb-2 mb-4"><i class="fas fa-cubes me-2 text-warning"></i>5. Core Components</h2>
                    
                    <h4>4.1 Cache Service</h4>
                    <p>The central component managing all cache operations including regions, TTL, and persistence coordination.</p>
                    
                    <h4 class="mt-4">4.2 Region Manager</h4>
                    <p>Regions provide logical isolation for cache entries:</p>
                    <table class="table table-bordered">
                        <thead class="table-light">
                            <tr><th>Feature</th><th>Description</th></tr>
                        </thead>
                        <tbody>
                            <tr><td><strong>Auto-Creation</strong></td><td>Regions are automatically created when data is stored to a non-existent region</td></tr>
                            <tr><td><strong>Namespace Isolation</strong></td><td>Keys are scoped within regions</td></tr>
                            <tr><td><strong>Independent TTL</strong></td><td>Each region can have default TTL settings</td></tr>
                            <tr><td><strong>Separate Statistics</strong></td><td>Per-region hit/miss tracking</td></tr>
                            <tr><td><strong>Attribute Mapping</strong></td><td>JSON attribute transformation on storage</td></tr>
                            <tr><td><strong>Region Isolation</strong></td><td>Each region has dedicated database instance (RocksDB/LMDB/SQLite)</td></tr>
                        </tbody>
                    </table>
                    
                    <h4 class="mt-4">4.3 JSON Service</h4>
                    <p>Native JSON document support with JSONPath queries:</p>
                    <ul>
                        <li><strong>Equality:</strong> <code>$.name=Alice</code></li>
                        <li><strong>Comparison:</strong> <code>$.age&gt;25</code>, <code>$.age&lt;=35</code></li>
                        <li><strong>Pattern:</strong> <code>$.name LIKE %Ali%</code></li>
                        <li><strong>Contains:</strong> <code>$.roles CONTAINS admin</code></li>
                        <li><strong>Nested:</strong> <code>$.address.city=New York</code></li>
                    </ul>
                </section>

                <!-- 5. Persistence Layer -->
                <section id="persistence" class="mb-5">
                    <h2 class="border-bottom pb-2 mb-4"><i class="fas fa-database me-2 text-danger"></i>6. Persistence Layer</h2>
                    
                    <h4>Backend Comparison</h4>
                    <table class="table table-bordered">
                        <thead class="table-light">
                            <tr><th>Backend</th><th>Use Case</th><th>Pros</th><th>Cons</th></tr>
                        </thead>
                        <tbody>
                            <tr><td><strong>RocksDB</strong></td><td>High-performance (Default)</td><td>Embedded, LSM-tree, per-region isolation</td><td>Complex tuning</td></tr>
                            <tr><td><strong>LMDB</strong></td><td>Zero-copy reads</td><td>ACID, crash-safe, memory-mapped</td><td>Write-heavy workloads</td></tr>
                            <tr><td><strong>MongoDB</strong></td><td>Production clusters</td><td>Distributed, scalable</td><td>Requires separate server</td></tr>
                            <tr><td><strong>PostgreSQL</strong></td><td>Enterprise</td><td>ACID, mature tooling</td><td>Requires separate server</td></tr>
                            <tr><td><strong>SQLite</strong></td><td>Development/Single-node</td><td>Zero config, file-based</td><td>Single-writer, limited scale</td></tr>
                            <tr><td><strong>InMemory</strong></td><td>Testing/Dev</td><td>Fastest, no I/O</td><td>No persistence</td></tr>
                        </tbody>
                    </table>
                    
                    <div class="alert alert-info mt-3">
                        <i class="fas fa-info-circle me-2"></i>
                        <strong>Region Isolation:</strong> RocksDB, LMDB, and SQLite use separate database instances per region 
                        for better concurrency, isolation, and independent compaction.
                    </div>
                </section>

                <!-- 6. Protocol Design -->
                <section id="protocol" class="mb-5">
                    <h2 class="border-bottom pb-2 mb-4"><i class="fas fa-code me-2 text-secondary"></i>7. Protocol Design</h2>
                    
                    <h4>7.1 Redis RESP Protocol</h4>
                    <table class="table table-bordered">
                        <thead class="table-light">
                            <tr><th>Type</th><th>Prefix</th><th>Example</th></tr>
                        </thead>
                        <tbody>
                            <tr><td>Simple String</td><td><code>+</code></td><td><code>+OK\r\n</code></td></tr>
                            <tr><td>Error</td><td><code>-</code></td><td><code>-ERR unknown command\r\n</code></td></tr>
                            <tr><td>Integer</td><td><code>:</code></td><td><code>:1000\r\n</code></td></tr>
                            <tr><td>Bulk String</td><td><code>$</code></td><td><code>$5\r\nhello\r\n</code></td></tr>
                            <tr><td>Array</td><td><code>*</code></td><td><code>*2\r\n$3\r\nGET\r\n$3\r\nkey\r\n</code></td></tr>
                            <tr><td>Null</td><td><code>$-1</code></td><td><code>$-1\r\n</code></td></tr>
                        </tbody>
                    </table>
                    
                    <h4 class="mt-4">7.2 Kuber Protocol Extensions</h4>
                    <table class="table table-bordered">
                        <thead class="table-light">
                            <tr><th>Command</th><th>Description</th><th>Example</th></tr>
                        </thead>
                        <tbody>
                            <tr><td><code>RSELECT region</code></td><td>Select region</td><td><code>RSELECT users</code></td></tr>
                            <tr><td><code>RCREATE name desc</code></td><td>Create region</td><td><code>RCREATE orders "Order data"</code></td></tr>
                            <tr><td><code>REGIONS</code></td><td>List regions</td><td><code>REGIONS</code></td></tr>
                            <tr><td><code>JSET key json</code></td><td>Set JSON</td><td><code>JSET user:1 {"name":"Alice"}</code></td></tr>
                            <tr><td><code>JGET key [path]</code></td><td>Get JSON</td><td><code>JGET user:1 $.name</code></td></tr>
                            <tr><td><code>JUPDATE key json [ttl]</code></td><td>Merge JSON (upsert)</td><td><code>JUPDATE user:1 {"age":31}</code></td></tr>
                            <tr><td><code>JREMOVE key ["attr",...]</code></td><td>Remove JSON attributes</td><td><code>JREMOVE user:1 ["temp"]</code></td></tr>
                            <tr><td><code>JSEARCH query</code></td><td>Search JSON</td><td><code>JSEARCH $.age&gt;30</code></td></tr>
                            <tr><td><code>STATUS</code></td><td>Server status</td><td><code>STATUS</code></td></tr>
                        </tbody>
                    </table>
                </section>

                <!-- 7. Replication Architecture -->
                <section id="replication" class="mb-5">
                    <h2 class="border-bottom pb-2 mb-4"><i class="fas fa-sync me-2 text-info"></i>8. Replication Architecture</h2>
                    <p>Primary/Secondary replication with ZooKeeper coordination for high availability:</p>
                    <ul>
                        <li><strong>Primary Node:</strong> Handles all write operations</li>
                        <li><strong>Secondary Nodes:</strong> Read-only replicas for scale-out reads</li>
                        <li><strong>ZooKeeper:</strong> Leader election, configuration management, health monitoring</li>
                        <li><strong>Automatic Failover:</strong> Secondary promoted to Primary on failure</li>
                    </ul>
                    
                    <pre class="bg-dark text-light p-3 rounded" style="font-size: 0.8rem;">
┌─────────────────────────────────────────────────────────────────┐
│                    Load Balancer                                 │
│              (HAProxy / AWS ALB / etc.)                          │
└───────────────────────┬─────────────────────────────────────────┘
                        │
        ┌───────────────┼───────────────┐
        ▼               ▼               ▼
┌───────────┐   ┌───────────┐   ┌───────────┐
│  Primary  │   │Secondary 1│   │Secondary 2│
│   (R/W)   │   │  (R only) │   │  (R only) │
└─────┬─────┘   └─────┬─────┘   └─────┬─────┘
      │               │               │
      └───────────────┼───────────────┘
                      ▼
        ┌─────────────────────────┐
        │   ZooKeeper Cluster     │
        └─────────────────────────┘</pre>
                </section>

                <!-- 9. Event Publishing -->
                <section id="event-publishing" class="mb-5">
                    <h2 class="border-bottom pb-2 mb-4"><i class="fas fa-broadcast-tower me-2 text-warning"></i>9. Event Publishing <span class="badge bg-warning text-dark">v1.3.2</span></h2>
                    <p>Kuber can stream cache events to external messaging systems for real-time integrations, analytics, and event-driven architectures.</p>
                    
                    <h4 class="mt-4">Publishing Architecture</h4>
                    <pre class="bg-dark text-light p-3 rounded" style="font-size: 0.8rem;">
CacheService.set() / delete()
         │
         │ Submit to async queue (non-blocking)
         ▼
┌─────────────────────────────┐
│  Publishing Thread Pool     │ (configurable, default: 4 threads)
└────────────┬────────────────┘
             │
             ▼
      PublisherRegistry
             │
    ┌────┬───┴───┬────┬────┐
    ▼    ▼       ▼    ▼    ▼
 Kafka  AMQ  RabbitMQ IBM  File
                      MQ</pre>
                    
                    <h4 class="mt-4">Supported Publishers</h4>
                    <table class="table table-bordered">
                        <thead class="table-light">
                            <tr><th>Publisher</th><th>Type</th><th>Features</th></tr>
                        </thead>
                        <tbody>
                            <tr><td><strong>Apache Kafka</strong></td><td>kafka</td><td>High throughput, auto topic creation, producer pooling</td></tr>
                            <tr><td><strong>RabbitMQ</strong></td><td>rabbitmq</td><td>AMQP messaging, exchange routing, channel pooling</td></tr>
                            <tr><td><strong>IBM MQ</strong></td><td>ibmmq</td><td>Enterprise messaging, SSL/TLS, queue manager integration</td></tr>
                            <tr><td><strong>Apache ActiveMQ</strong></td><td>activemq</td><td>JMS messaging, connection pooling, queue/topic support</td></tr>
                            <tr><td><strong>File System</strong></td><td>file</td><td>JSON Lines format, date/size rotation, network share support</td></tr>
                        </tbody>
                    </table>
                    
                    <h4 class="mt-4">Configuration Model (v1.3.2)</h4>
                    <div class="row">
                        <div class="col-md-6">
                            <div class="card">
                                <div class="card-header bg-info text-white">Centralized Brokers</div>
                                <div class="card-body">
                                    <pre class="bg-light p-2 rounded mb-0"><code>kuber.publishing.brokers:
  prod-kafka:
    type: kafka
    kafka:
      bootstrapServers: kafka1:9092
  
  backup-file:
    type: file
    file:
      directory: ./events</code></pre>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="card">
                                <div class="card-header bg-success text-white">Region Destinations</div>
                                <div class="card-body">
                                    <pre class="bg-light p-2 rounded mb-0"><code>kuber.publishing.regions:
  customers:
    destinations:
      - broker: prod-kafka
        topic: customer-events
      - broker: backup-file
        prefix: customers</code></pre>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="alert alert-info mt-4">
                        <strong><i class="fas fa-info-circle me-2"></i>Full Documentation:</strong> 
                        See <a href="/help/publishing" class="alert-link">Event Publishing Guide</a> for complete configuration options, 
                        message formats, and examples.
                    </div>
                </section>

                <!-- 10. Request/Response Messaging -->
                <section id="request-response" class="mb-5">
                    <h2 class="border-bottom pb-2 mb-4"><i class="fas fa-exchange-alt me-2 text-info"></i>10. Request/Response Messaging <span class="badge bg-success">v1.7.1</span></h2>
                    <p>Kuber can accept cache operation requests via message brokers, enabling asynchronous cache access for event-driven architectures.</p>
                    
                    <h4 class="mt-4">Request/Response Architecture</h4>
                    <pre class="bg-dark text-light p-3 rounded" style="font-size: 0.8rem;">
External Applications
         │
         │ JSON Request (api_key, message_id, operation, ...)
         ▼
┌─────────────────────────────────────────────────────────────┐
│               Message Broker (Kafka/AMQ/RabbitMQ/IBM MQ)    │
│                      Request Topics                          │
│    ccs_cache_request    order_cache_request    ...          │
└────────────────────────────┬────────────────────────────────┘
                             │
                             ▼
┌─────────────────────────────────────────────────────────────┐
│              RequestResponseService                          │
│  ┌─────────────────┐  ┌───────────────────────────────────┐ │
│  │ Broker Adapters │  │  Request Processing Thread Pool   │ │
│  │ • Kafka         │  │  (configurable, default: 10)      │ │
│  │ • ActiveMQ      │  └───────────────────────────────────┘ │
│  │ • RabbitMQ      │  ┌───────────────────────────────────┐ │
│  │ • IBM MQ        │  │  Blocking Queue (max: 100)        │ │
│  └─────────────────┘  │  Backpressure: pause at 80%       │ │
│                       └───────────────────────────────────┘ │
└────────────────────────────┬────────────────────────────────┘
                             │
                             ▼
                        CacheService
                             │
                             ▼ JSON Response
┌─────────────────────────────────────────────────────────────┐
│               Message Broker Response Topics                 │
│    ccs_cache_response   order_cache_response   ...          │
└─────────────────────────────────────────────────────────────┘</pre>
                    
                    <h4 class="mt-4">Key Features</h4>
                    <table class="table table-bordered">
                        <thead class="table-light">
                            <tr><th>Feature</th><th>Description</th></tr>
                        </thead>
                        <tbody>
                            <tr><td><strong>Multi-Broker</strong></td><td>Connect to multiple brokers simultaneously (Kafka, ActiveMQ, RabbitMQ, IBM MQ)</td></tr>
                            <tr><td><strong>Hot Reload</strong></td><td>Configuration changes detected automatically, broker connections update without restart</td></tr>
                            <tr><td><strong>Backpressure</strong></td><td>Automatic pause/resume when queue exceeds thresholds (80%/50%)</td></tr>
                            <tr><td><strong>API Key Auth</strong></td><td>All requests must include valid API key for authentication</td></tr>
                            <tr><td><strong>Full Operations</strong></td><td>All cache operations supported: GET, SET, DELETE, MGET, MSET, JSON ops, etc.</td></tr>
                            <tr><td><strong>Admin UI</strong></td><td>Web interface for broker management and queue monitoring</td></tr>
                            <tr><td><strong>Test Clients <span class="badge bg-success">v1.7.5</span></strong></td><td>Python, Java, C# test clients for all 4 broker types</td></tr>
                        </tbody>
                    </table>
                    
                    <h4 class="mt-4">Test Clients <span class="badge bg-success">v1.7.5</span></h4>
                    <p>Ready-to-use test clients demonstrate request/response messaging for all brokers:</p>
                    <div class="table-responsive">
                        <table class="table table-bordered table-sm">
                            <thead class="table-light">
                                <tr><th>Broker</th><th>Python</th><th>Java</th><th>C#</th></tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td><strong>Kafka</strong></td>
                                    <td><code>kafka_request_response_test.py</code></td>
                                    <td><code>KafkaRequestResponseTest.java</code></td>
                                    <td><code>KafkaRequestResponseTest.cs</code></td>
                                </tr>
                                <tr>
                                    <td><strong>ActiveMQ</strong></td>
                                    <td><code>activemq_request_response_test.py</code></td>
                                    <td><code>ActiveMqRequestResponseTest.java</code></td>
                                    <td><code>ActiveMqRequestResponseTest.cs</code></td>
                                </tr>
                                <tr>
                                    <td><strong>RabbitMQ</strong></td>
                                    <td><code>rabbitmq_request_response_test.py</code></td>
                                    <td><code>RabbitMqRequestResponseTest.java</code></td>
                                    <td><code>RabbitMqRequestResponseTest.cs</code></td>
                                </tr>
                                <tr>
                                    <td><strong>IBM MQ</strong></td>
                                    <td><code>ibmmq_request_response_test.py</code></td>
                                    <td><code>IbmMqRequestResponseTest.java</code></td>
                                    <td><code>IbmMqRequestResponseTest.cs</code></td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    
                    <h4 class="mt-4">Request/Response Flow</h4>
                    <div class="row">
                        <div class="col-md-6">
                            <div class="card">
                                <div class="card-header bg-primary text-white">Request Format</div>
                                <div class="card-body">
                                    <pre class="bg-light p-2 rounded mb-0"><code>{
  "api_key": "kub_abc123...",
  "message_id": "req-12345",
  "operation": "GET",
  "region": "users",
  "key": "user:1001"
}</code></pre>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="card">
                                <div class="card-header bg-success text-white">Response Format</div>
                                <div class="card-body">
                                    <pre class="bg-light p-2 rounded mb-0"><code>{
  "request_receive_timestamp": "...",
  "response_time": "...",
  "processing_time_ms": 2,
  "request": { ... },
  "response": {
    "success": true,
    "result": {...}
  }
}</code></pre>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="alert alert-info mt-4">
                        <strong><i class="fas fa-info-circle me-2"></i>Full Documentation:</strong> 
                        See <a href="/help/messaging" class="alert-link">Request/Response Messaging Guide</a> for complete configuration, 
                        supported operations, and examples.
                    </div>
                </section>

                <!-- 11. Security Architecture -->
                <section id="security" class="mb-5">
                    <h2 class="border-bottom pb-2 mb-4"><i class="fas fa-shield-alt me-2 text-success"></i>11. Security Architecture</h2>
                    <p><strong>All access requires authentication.</strong> Kuber supports multiple authentication methods for different use cases.</p>
                    
                    <h4 class="mt-4">Authentication Methods</h4>
                    <table class="table table-bordered">
                        <thead class="table-light">
                            <tr><th>Method</th><th>Use Case</th><th>Protocol</th></tr>
                        </thead>
                        <tbody>
                            <tr><td><strong>Username/Password</strong></td><td>Web UI, interactive use</td><td>Form login, HTTP Basic</td></tr>
                            <tr><td><strong>API Key</strong></td><td>Programmatic access, CI/CD, services</td><td>Header, query param</td></tr>
                            <tr><td><strong>Redis AUTH</strong></td><td>Redis protocol clients</td><td>AUTH command</td></tr>
                        </tbody>
                    </table>
                    
                    <h4 class="mt-4">API Key Authentication (v1.2.5)</h4>
                    <p>API keys provide secure, revocable access for applications and services.</p>
                    <div class="row">
                        <div class="col-md-6">
                            <div class="card">
                                <div class="card-header bg-primary text-white">REST API</div>
                                <div class="card-body">
                                    <pre class="bg-light p-2 rounded mb-0"><code># X-API-Key header
curl -H "X-API-Key: kub_xxx..." /api/cache/key

# Authorization header
curl -H "Authorization: ApiKey kub_xxx..." /api/cache/key

# Query parameter
curl "/api/cache/key?api_key=kub_xxx..."</code></pre>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="card">
                                <div class="card-header bg-success text-white">Redis Protocol</div>
                                <div class="card-body">
                                    <pre class="bg-light p-2 rounded mb-0"><code># API Key authentication
AUTH APIKEY kub_xxx...

# Direct API key
AUTH kub_xxx...

# Traditional password
AUTH password</code></pre>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <h4 class="mt-4">API Key Features</h4>
                    <ul>
                        <li><strong>Secure Generation</strong>: 64-character cryptographically random keys</li>
                        <li><strong>Role-Based</strong>: Keys inherit roles (USER, OPERATOR, ADMIN)</li>
                        <li><strong>Expiration</strong>: Optional expiration dates for temporary access</li>
                        <li><strong>Revocation</strong>: Instantly disable compromised keys</li>
                        <li><strong>Audit</strong>: Track last-used timestamps</li>
                    </ul>
                    
                    <h4 class="mt-4"><i class="fas fa-user-shield me-2"></i>Role-Based Access Control (v1.7.5)</h4>
                    <p>Kuber implements enterprise-grade RBAC with region-specific permissions:</p>
                    
                    <div class="card mb-3">
                        <div class="card-header bg-danger text-white">Authorization Flow</div>
                        <div class="card-body">
                            <pre class="bg-light p-3 rounded mb-0" style="font-size: 0.85rem;">
┌──────────┐      ┌────────────┐      ┌─────────────────────┐      ┌──────────────┐
│   User   │─────▶│   Roles    │─────▶│   Permissions       │─────▶│   Regions    │
└──────────┘      └────────────┘      └─────────────────────┘      └──────────────┘

admin ──────────▶ [admin] ───────────▶ ALL ────────────────────────▶ * (all regions)
operator ───────▶ [default_full] ───▶ READ, WRITE, DELETE ─────────▶ default
readonly ───────▶ [orders_readonly]─▶ READ ─────────────────────────▶ orders</pre>
                        </div>
                    </div>
                    
                    <div class="row">
                        <div class="col-md-6">
                            <h5>Permission Types</h5>
                            <table class="table table-sm table-bordered">
                                <thead class="table-light">
                                    <tr><th>Permission</th><th>Operations</th></tr>
                                </thead>
                                <tbody>
                                    <tr><td><span class="badge bg-success">READ</span></td><td>GET, EXISTS, KEYS, SCAN, SEARCH</td></tr>
                                    <tr><td><span class="badge bg-warning text-dark">WRITE</span></td><td>SET, SETEX, INCR, HSET, JSET</td></tr>
                                    <tr><td><span class="badge bg-danger">DELETE</span></td><td>DEL, HDEL, JDEL, FLUSHDB</td></tr>
                                    <tr><td><span class="badge bg-dark">ADMIN</span></td><td>Region mgmt, User/Role mgmt</td></tr>
                                </tbody>
                            </table>
                        </div>
                        <div class="col-md-6">
                            <h5>Role Naming Convention</h5>
                            <table class="table table-sm table-bordered">
                                <thead class="table-light">
                                    <tr><th>Pattern</th><th>Example</th></tr>
                                </thead>
                                <tbody>
                                    <tr><td><code>admin</code></td><td>System admin (reserved)</td></tr>
                                    <tr><td><code>{region}_readonly</code></td><td>orders_readonly</td></tr>
                                    <tr><td><code>{region}_readwrite</code></td><td>orders_readwrite</td></tr>
                                    <tr><td><code>{region}_full</code></td><td>orders_full</td></tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                    
                    <h5 class="mt-3">Hot Reload</h5>
                    <ul>
                        <li><strong>Automatic:</strong> Security files checked every 30 seconds</li>
                        <li><strong>Linked:</strong> Changes to users.json OR roles.json reload BOTH files</li>
                        <li><strong>No Restart:</strong> Security changes take effect without server restart</li>
                    </ul>
                    
                    <h5 class="mt-3">Authorization Enforcement</h5>
                    <table class="table table-sm table-bordered">
                        <thead class="table-light">
                            <tr><th>Layer</th><th>Enforcement Point</th></tr>
                        </thead>
                        <tbody>
                            <tr><td>Web UI</td><td>CacheController, RegionController, HomeController</td></tr>
                            <tr><td>REST API</td><td>ApiController - all /api/* endpoints</td></tr>
                            <tr><td>Redis Protocol</td><td>RedisProtocolHandler after AUTH</td></tr>
                        </tbody>
                    </table>
                    
                    <h4 class="mt-4">User Configuration (users.json)</h4>
                    <pre class="bg-dark text-light p-3 rounded"><code>{
  "users": [
    {
      "userId": "admin",
      "password": "admin123",
      "fullName": "System Administrator",
      "roles": ["admin"],
      "enabled": true,
      "systemUser": true
    },
    {
      "userId": "operator",
      "password": "operator123", 
      "fullName": "Cache Operator",
      "roles": ["default_full", "orders_readwrite"],
      "enabled": true
    }
  ]
}</code></pre>
                    
                    <h4 class="mt-4">Role Configuration (roles.json)</h4>
                    <pre class="bg-dark text-light p-3 rounded"><code>{
  "roles": [
    {
      "name": "admin",
      "displayName": "System Administrator",
      "region": "*",
      "permissions": ["READ", "WRITE", "DELETE", "ADMIN"],
      "systemRole": true
    },
    {
      "name": "default_readonly",
      "region": "default",
      "permissions": ["READ"]
    },
    {
      "name": "orders_full",
      "region": "orders",
      "permissions": ["READ", "WRITE", "DELETE"]
    }
  ]
}</code></pre>
                </section>

                <!-- 12. Data Flow -->
                <section id="data-flow" class="mb-5">
                    <h2 class="border-bottom pb-2 mb-4"><i class="fas fa-exchange-alt me-2 text-primary"></i>12. Data Flow</h2>
                    
                    <h4>Write Operation Flow</h4>
                    <pre class="bg-dark text-light p-3 rounded" style="font-size: 0.8rem;">
Client          Protocol Handler       CacheService         KeyIndex          Persistence
   │                  │                     │                   │                  │
   │ SET key value    │                     │                   │                  │
   │─────────────────►│                     │                   │                  │
   │                  │ set(region,key,val) │                   │                  │
   │                  │────────────────────►│                   │                  │
   │                  │                     │ put(key,metadata) │                  │
   │                  │                     │──────────────────►│                  │
   │                  │                     │                   │                  │
   │                  │                     │ save(region,key,entry)               │
   │                  │                     │─────────────────────────────────────►│
   │                  │                     │                   │                  │
   │ +OK              │                     │                   │                  │
   │◄─────────────────│◄────────────────────│                   │                  │</pre>
                    
                    <h4 class="mt-4">Read Operation Flow (Cache Hit)</h4>
                    <pre class="bg-dark text-light p-3 rounded" style="font-size: 0.8rem;">
Client          Protocol Handler       CacheService         KeyIndex         Value Cache
   │                  │                     │                   │                  │
   │ GET key          │                     │                   │                  │
   │─────────────────►│                     │                   │                  │
   │                  │ get(region,key)     │                   │                  │
   │                  │────────────────────►│                   │                  │
   │                  │                     │ containsKey(key)  │                  │
   │                  │                     │──────────────────►│                  │
   │                  │                     │ true              │                  │
   │                  │                     │◄──────────────────│                  │
   │                  │                     │                   │  get(key)        │
   │                  │                     │──────────────────────────────────────►│
   │                  │                     │                   │  CACHE HIT       │
   │                  │                     │◄──────────────────────────────────────│
   │ $value           │                     │                   │                  │
   │◄─────────────────│◄────────────────────│                   │                  │</pre>
                </section>

                <!-- 13. Deployment Patterns -->
                <section id="deployment" class="mb-5">
                    <h2 class="border-bottom pb-2 mb-4"><i class="fas fa-server me-2 text-secondary"></i>13. Deployment Patterns</h2>
                    
                    <div class="row">
                        <div class="col-md-6">
                            <div class="card h-100">
                                <div class="card-header bg-primary text-white">Single Node (Development)</div>
                                <div class="card-body">
                                    <ul class="mb-0">
                                        <li>Redis Protocol: Port 6380</li>
                                        <li>REST API: Port 8080</li>
                                        <li>Web UI: Port 8080</li>
                                        <li>Persistence: RocksDB/SQLite</li>
                                        <li>No ZooKeeper required</li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="card h-100">
                                <div class="card-header bg-success text-white">HA Cluster (Production)</div>
                                <div class="card-body">
                                    <ul class="mb-0">
                                        <li>1 Primary + N Secondaries</li>
                                        <li>Load Balancer (HAProxy/ALB)</li>
                                        <li>ZooKeeper Cluster (3+ nodes)</li>
                                        <li>Shared Persistence (MongoDB/PostgreSQL)</li>
                                        <li>Automatic failover</li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- Deep Dive -->
                <section class="mb-5">
                    <div class="card shadow-sm border-secondary">
                        <div class="card-header bg-secondary text-white">
                            <h2 class="mb-0"><i class="fas fa-microscope me-2"></i>Deep Dive: System Internals</h2>
                        </div>
                        <div class="card-body">
                            <p>For detailed documentation on operational mechanics, see the <a href="/help/internals" class="fw-bold">System Internals</a> page:</p>
                            <div class="row">
                                <div class="col-md-3">
                                    <ul class="mb-0">
                                        <li><a href="/help/internals#memory-management">Memory Management</a></li>
                                        <li><a href="/help/internals#key-management">Key Management</a></li>
                                    </ul>
                                </div>
                                <div class="col-md-3">
                                    <ul class="mb-0">
                                        <li><a href="/help/internals#persistence-management">Persistence Management</a></li>
                                        <li><a href="/help/internals#compaction">Compaction &amp; Optimization</a></li>
                                    </ul>
                                </div>
                                <div class="col-md-3">
                                    <ul class="mb-0">
                                        <li><a href="/help/internals#thread-management">Thread Management</a></li>
                                        <li><a href="/help/internals#data-safety">Data Safety &amp; Recovery</a></li>
                                    </ul>
                                </div>
                                <div class="col-md-3">
                                    <ul class="mb-0">
                                        <li><a href="/help/internals#event-publishing">Event Publishing</a></li>
                                        <li><a href="/help/publishing">Publishing Guide</a></li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- Back to Help -->
                <div class="mt-5 text-center">
                    <a href="/help" class="btn btn-outline-primary">
                        <i class="fas fa-arrow-left me-2"></i>Back to Help Index
                    </a>
                    <a href="/help/internals" class="btn btn-outline-secondary ms-2">
                        <i class="fas fa-cogs me-2"></i>System Internals
                    </a>
                </div>
            </div>
        </div>

        <!-- Footer -->
        <footer class="py-4 mt-5 border-top">
            <div class="row">
                <div class="col-md-6">
                    <h6><i class="fas fa-database me-2"></i><span th:text="${appName} ?: 'Kuber'">Kuber</span> Distributed Cache</h6>
                    <p class="text-muted small mb-0">Version 1.7.5</p>
                </div>
                <div class="col-md-6 text-end">
                    <p class="text-muted small mb-0">
                        Copyright &copy; 2025-2030, All Rights Reserved<br>
                        Ashutosh Sinha | <a href="mailto:ajsinha@gmail.com">ajsinha@gmail.com</a><br>
                        <span class="badge bg-warning text-dark">Patent Pending</span>
                    </p>
                </div>
            </div>
        </footer>
    </div>
</main>

<th:block th:replace="~{layout :: scripts}"></th:block>

</body>
</html>
