<!DOCTYPE html>
<!--
  ~ Copyright © 2025-2030, All Rights Reserved
  ~ Ashutosh Sinha | Email: ajsinha@gmail.com
  ~ Patent Pending
  -->
<html xmlns:th="http://www.thymeleaf.org">
<head th:replace="~{layout :: head('Help & Documentation')}"></head>
<body class="d-flex flex-column min-vh-100">

<nav th:replace="~{layout :: navbar}"></nav>

<main class="flex-fill">
    <div class="container-fluid py-4">
        <div class="row mb-4">
            <div class="col">
                <h2 class="mb-0">
                    <i class="fas fa-book me-2"></i>
                    Help & Documentation
                </h2>
                <p class="text-muted mt-2">Comprehensive guide for using Kuber Distributed Cache</p>
            </div>
        </div>
        
        <div class="row">
            <!-- Navigation Sidebar -->
            <div class="col-lg-3 mb-4">
                <div class="card border-0 shadow-sm sticky-top" style="top: 20px;">
                    <div class="card-body">
                        <h6 class="card-title text-uppercase text-muted small mb-3">Contents</h6>
                        <nav class="nav flex-column">
                            <a class="nav-link px-0 py-1" href="#overview">Overview</a>
                            <a class="nav-link px-0 py-1" href="#ui-guide">Web UI Guide</a>
                            <a class="nav-link px-0 py-1" href="#rest-api">REST API</a>
                            <a class="nav-link px-0 py-1" href="#redis-protocol">Redis Protocol</a>
                            <a class="nav-link px-0 py-1" href="#regions">Regions</a>
                            <a class="nav-link px-0 py-1" href="#string-ops">String Operations</a>
                            <a class="nav-link px-0 py-1" href="#json-ops">JSON Operations</a>
                            <a class="nav-link px-0 py-1" href="#hash-ops">Hash Operations</a>
                            <a class="nav-link px-0 py-1" href="#key-ops">Key Operations</a>
                            <a class="nav-link px-0 py-1" href="#search-ops">Search Operations</a>
                            <a class="nav-link px-0 py-1" href="#ttl-ops">TTL Operations</a>
                            <a class="nav-link px-0 py-1" href="#configuration">Configuration</a>
                        </nav>
                    </div>
                </div>
            </div>
            
            <!-- Main Content -->
            <div class="col-lg-9">
                
                <!-- Overview Section -->
                <section id="overview" class="card border-0 shadow-sm mb-4">
                    <div class="card-header bg-primary text-white py-3">
                        <h4 class="mb-0"><i class="fas fa-info-circle me-2"></i>Overview</h4>
                    </div>
                    <div class="card-body">
                        <p>Kuber is a high-performance distributed cache system that combines the speed of in-memory caching with the durability of MongoDB persistence. It provides:</p>
                        <ul>
                            <li><strong>Redis Protocol Compatibility</strong> - Use existing Redis clients</li>
                            <li><strong>REST API</strong> - Modern HTTP-based access</li>
                            <li><strong>Web UI</strong> - Visual management interface</li>
                            <li><strong>Regions</strong> - Logical partitioning of cache data</li>
                            <li><strong>JSON Support</strong> - Store and query JSON documents</li>
                            <li><strong>TTL Support</strong> - Automatic expiration of entries</li>
                            <li><strong>Replication</strong> - Primary/Secondary setup via ZooKeeper</li>
                        </ul>
                        
                        <div class="alert alert-info">
                            <i class="fas fa-lightbulb me-2"></i>
                            <strong>Quick Start:</strong> Connect via Redis client on port <code>6380</code>, use the Web UI at <code>http://localhost:8080</code>, or call the REST API.
                        </div>
                    </div>
                </section>
                
                <!-- Web UI Guide -->
                <section id="ui-guide" class="card border-0 shadow-sm mb-4">
                    <div class="card-header bg-success text-white py-3">
                        <h4 class="mb-0"><i class="fas fa-desktop me-2"></i>Web UI Guide</h4>
                    </div>
                    <div class="card-body">
                        <h5>Dashboard</h5>
                        <p>The dashboard provides an overview of your cache status including total entries, regions, and connection statistics.</p>
                        
                        <h5 class="mt-4">Cache Browser</h5>
                        <p>Navigate to <strong>Cache</strong> to browse and manage cache entries:</p>
                        <ul>
                            <li>Select a region from the dropdown</li>
                            <li>View all keys in the region</li>
                            <li>Click on a key to view/edit its value</li>
                            <li>Use the "Insert Entry" button to add new entries</li>
                        </ul>
                        
                        <h5 class="mt-4">Query Interface</h5>
                        <p>The Query page allows you to execute various cache operations:</p>
                        <table class="table table-bordered">
                            <thead class="table-light">
                                <tr>
                                    <th>Query Type</th>
                                    <th>Description</th>
                                    <th>Example</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td><code>GET</code></td>
                                    <td>Retrieve a string value</td>
                                    <td>Key: <code>user:1001</code></td>
                                </tr>
                                <tr>
                                    <td><code>JGET</code></td>
                                    <td>Retrieve a JSON value</td>
                                    <td>Key: <code>product:5001</code></td>
                                </tr>
                                <tr>
                                    <td><code>KEYS</code></td>
                                    <td>List keys (glob pattern)</td>
                                    <td>Pattern: <code>user:*</code></td>
                                </tr>
                                <tr>
                                    <td><code>KSEARCH</code></td>
                                    <td>Search keys by regex with values</td>
                                    <td>Pattern: <code>user:\d+</code></td>
                                </tr>
                                <tr>
                                    <td><code>HGETALL</code></td>
                                    <td>Get all hash fields</td>
                                    <td>Key: <code>session:abc123</code></td>
                                </tr>
                                <tr>
                                    <td><code>JSEARCH</code></td>
                                    <td>Search JSON documents</td>
                                    <td>Query: <code>$.status=active</code></td>
                                </tr>
                            </tbody>
                        </table>
                        
                        <h5 class="mt-4">Region Management</h5>
                        <p>Navigate to <strong>Regions</strong> to:</p>
                        <ul>
                            <li>View all regions and their statistics</li>
                            <li>Create new regions</li>
                            <li>Delete or purge regions</li>
                            <li>View detailed statistics for each region</li>
                        </ul>
                        
                        <h5 class="mt-4">Inserting Entries via UI</h5>
                        <ol>
                            <li>Go to <strong>Cache → Insert Entry</strong></li>
                            <li>Select the target region</li>
                            <li>Enter a unique key (e.g., <code>user:1001</code>)</li>
                            <li>Choose value type: String or JSON</li>
                            <li>Enter the value</li>
                            <li>Optionally set TTL in seconds (-1 for no expiration)</li>
                            <li>Click "Save Entry"</li>
                        </ol>
                    </div>
                </section>
                
                <!-- REST API -->
                <section id="rest-api" class="card border-0 shadow-sm mb-4">
                    <div class="card-header bg-info text-white py-3">
                        <h4 class="mb-0"><i class="fas fa-plug me-2"></i>REST API</h4>
                    </div>
                    <div class="card-body">
                        <p>Base URL: <code>http://localhost:8080/api</code></p>
                        
                        <h5>Authentication</h5>
                        <p>Use HTTP Basic Authentication with credentials from <code>users.json</code>.</p>
                        <pre class="bg-dark text-light p-3 rounded"><code>curl -u admin:admin123 http://localhost:8080/api/info</code></pre>
                        
                        <h5 class="mt-4">Server Information</h5>
                        <pre class="bg-dark text-light p-3 rounded"><code># Get server info
curl -u admin:admin123 http://localhost:8080/api/info

# Health check
curl -u admin:admin123 http://localhost:8080/api/health</code></pre>
                        
                        <h5 class="mt-4">Region Operations</h5>
                        <pre class="bg-dark text-light p-3 rounded"><code># List all regions
curl -u admin:admin123 http://localhost:8080/api/regions

# Get region details
curl -u admin:admin123 http://localhost:8080/api/regions/default

# Create a new region
curl -u admin:admin123 -X POST -H "Content-Type: application/json" \
  -d '{"name":"users","description":"User cache"}' \
  http://localhost:8080/api/regions

# Delete a region
curl -u admin:admin123 -X DELETE http://localhost:8080/api/regions/users

# Purge all entries in a region
curl -u admin:admin123 -X POST http://localhost:8080/api/regions/default/purge

# Get region statistics
curl -u admin:admin123 http://localhost:8080/api/regions/default/stats</code></pre>
                        
                        <h5 class="mt-4">Key/Value Operations</h5>
                        <pre class="bg-dark text-light p-3 rounded"><code># Get a value
curl -u admin:admin123 http://localhost:8080/api/cache/default/mykey

# Set a string value
curl -u admin:admin123 -X PUT -H "Content-Type: application/json" \
  -d '{"value":"Hello World"}' \
  http://localhost:8080/api/cache/default/mykey

# Set with TTL (60 seconds)
curl -u admin:admin123 -X PUT -H "Content-Type: application/json" \
  -d '{"value":"Temporary","ttl":60}' \
  http://localhost:8080/api/cache/default/tempkey

# Set a JSON value
curl -u admin:admin123 -X PUT -H "Content-Type: application/json" \
  -d '{"json":{"name":"John","age":30,"active":true}}' \
  http://localhost:8080/api/cache/default/user:1001

# Delete a key
curl -u admin:admin123 -X DELETE http://localhost:8080/api/cache/default/mykey

# List keys (glob pattern)
curl -u admin:admin123 "http://localhost:8080/api/cache/default/keys?pattern=user:*"

# Search keys by regex (returns key-value pairs)
curl -u admin:admin123 "http://localhost:8080/api/cache/default/ksearch?pattern=user:\d%2B&limit=100"</code></pre>
                        
                        <h5 class="mt-4">Batch Operations</h5>
                        <pre class="bg-dark text-light p-3 rounded"><code># Multi-get
curl -u admin:admin123 -X POST -H "Content-Type: application/json" \
  -d '["key1","key2","key3"]' \
  http://localhost:8080/api/cache/default/mget

# Multi-set
curl -u admin:admin123 -X POST -H "Content-Type: application/json" \
  -d '{"key1":"value1","key2":"value2","key3":"value3"}' \
  http://localhost:8080/api/cache/default/mset</code></pre>
                        
                        <h5 class="mt-4">JSON Operations</h5>
                        <pre class="bg-dark text-light p-3 rounded"><code># Get JSON value
curl -u admin:admin123 http://localhost:8080/api/cache/default/user:1001/json

# Get JSON at specific path
curl -u admin:admin123 "http://localhost:8080/api/cache/default/user:1001/json?path=$.name"

# Set JSON value
curl -u admin:admin123 -X PUT -H "Content-Type: application/json" \
  -d '{"name":"Jane","email":"jane@example.com"}' \
  http://localhost:8080/api/cache/default/user:1002/json

# Search JSON documents
curl -u admin:admin123 -X POST -H "Content-Type: application/json" \
  -d '{"query":"$.age>25"}' \
  http://localhost:8080/api/cache/default/search</code></pre>
                        
                        <h5 class="mt-4">Hash Operations</h5>
                        <pre class="bg-dark text-light p-3 rounded"><code># Get all hash fields
curl -u admin:admin123 http://localhost:8080/api/cache/default/session:abc/hash

# Get specific hash field
curl -u admin:admin123 http://localhost:8080/api/cache/default/session:abc/hash/userId

# Set hash field
curl -u admin:admin123 -X PUT -H "Content-Type: application/json" \
  -d '{"value":"12345"}' \
  http://localhost:8080/api/cache/default/session:abc/hash/userId</code></pre>
                        
                        <h5 class="mt-4">TTL Operations</h5>
                        <pre class="bg-dark text-light p-3 rounded"><code># Set expiration
curl -u admin:admin123 -X POST "http://localhost:8080/api/cache/default/mykey/expire?seconds=300"

# Remove expiration (persist)
curl -u admin:admin123 -X DELETE http://localhost:8080/api/cache/default/mykey/expire</code></pre>
                    </div>
                </section>
                
                <!-- Redis Protocol -->
                <section id="redis-protocol" class="card border-0 shadow-sm mb-4">
                    <div class="card-header bg-danger text-white py-3">
                        <h4 class="mb-0"><i class="fas fa-terminal me-2"></i>Redis Protocol</h4>
                    </div>
                    <div class="card-body">
                        <p>Connect using any Redis client on port <code>6380</code>:</p>
                        <pre class="bg-dark text-light p-3 rounded"><code># Using redis-cli
redis-cli -p 6380

# With authentication (if configured)
redis-cli -p 6380 -a yourpassword</code></pre>
                        
                        <h5 class="mt-4">Basic Commands</h5>
                        <pre class="bg-dark text-light p-3 rounded"><code># Connection
PING                        # Returns PONG
AUTH password               # Authenticate
QUIT                        # Close connection

# String operations
SET mykey "Hello World"     # Set a value
GET mykey                   # Get a value
SETNX mykey "value"         # Set if not exists
SETEX mykey 60 "value"      # Set with TTL
MGET key1 key2 key3         # Get multiple
MSET k1 v1 k2 v2            # Set multiple
INCR counter                # Increment
DECR counter                # Decrement
APPEND mykey " More"        # Append to string
STRLEN mykey                # Get string length</code></pre>
                        
                        <h5 class="mt-4">Key Commands</h5>
                        <pre class="bg-dark text-light p-3 rounded"><code>KEYS user:*                 # List keys (glob pattern)
EXISTS mykey                # Check if key exists
DEL key1 key2               # Delete keys
TYPE mykey                  # Get value type
RENAME oldkey newkey        # Rename a key
TTL mykey                   # Get TTL in seconds
EXPIRE mykey 300            # Set TTL
PERSIST mykey               # Remove TTL</code></pre>
                        
                        <h5 class="mt-4">Hash Commands</h5>
                        <pre class="bg-dark text-light p-3 rounded"><code>HSET session:abc userId 12345    # Set hash field
HGET session:abc userId          # Get hash field
HMSET session:abc f1 v1 f2 v2    # Set multiple fields
HMGET session:abc f1 f2          # Get multiple fields
HGETALL session:abc              # Get all fields
HDEL session:abc field1          # Delete field
HEXISTS session:abc field1       # Check if field exists
HKEYS session:abc                # List all field names
HVALS session:abc                # List all values
HLEN session:abc                 # Count fields</code></pre>
                        
                        <h5 class="mt-4">Kuber Extension Commands</h5>
                        <pre class="bg-dark text-light p-3 rounded"><code># Region management
REGIONS                     # List all regions
RCREATE products "Product cache"  # Create region
RDROP products              # Delete region
RPURGE products             # Purge all entries
RINFO products              # Region info
RSELECT products            # Switch to region

# JSON operations
JSET user:1001 '{"name":"John","age":30}'  # Set JSON
JGET user:1001                              # Get JSON
JGET user:1001 $.name                       # Get JSON path
JSEARCH $.age>25                            # Search JSON
JDEL user:1001 $.email                      # Delete JSON path

# Key search (regex)
KSEARCH user:\d+            # Search keys by regex
KSEARCH ^session_.* LIMIT 50  # With limit

# Server commands
INFO                        # Server info
DBSIZE                      # Entry count
FLUSHDB                     # Clear current region
FLUSHALL                    # Clear all regions
TIME                        # Server time</code></pre>
                    </div>
                </section>
                
                <!-- Regions -->
                <section id="regions" class="card border-0 shadow-sm mb-4">
                    <div class="card-header bg-warning text-dark py-3">
                        <h4 class="mb-0"><i class="fas fa-layer-group me-2"></i>Regions</h4>
                    </div>
                    <div class="card-body">
                        <p>Regions provide logical partitioning of your cache data. Each region has its own namespace for keys.</p>
                        
                        <h5>Default Region</h5>
                        <p>A <code>default</code> region is automatically created on startup. All operations without explicit region selection use this region.</p>
                        
                        <h5 class="mt-4">Creating Regions</h5>
                        <div class="row">
                            <div class="col-md-4">
                                <h6>Via UI</h6>
                                <ol>
                                    <li>Go to Regions page</li>
                                    <li>Click "Create Region"</li>
                                    <li>Enter name and description</li>
                                    <li>Click "Create"</li>
                                </ol>
                            </div>
                            <div class="col-md-4">
                                <h6>Via REST API</h6>
                                <pre class="bg-dark text-light p-2 rounded small"><code>POST /api/regions
{"name":"users"}</code></pre>
                            </div>
                            <div class="col-md-4">
                                <h6>Via Redis Protocol</h6>
                                <pre class="bg-dark text-light p-2 rounded small"><code>RCREATE users "User cache"</code></pre>
                            </div>
                        </div>
                        
                        <h5 class="mt-4">Selecting Regions</h5>
                        <table class="table table-bordered">
                            <thead class="table-light">
                                <tr><th>Interface</th><th>Method</th></tr>
                            </thead>
                            <tbody>
                                <tr><td>Web UI</td><td>Use region dropdown on Cache/Query pages</td></tr>
                                <tr><td>REST API</td><td>Include region in URL path: <code>/api/cache/{region}/...</code></td></tr>
                                <tr><td>Redis Protocol</td><td>Use <code>RSELECT regionname</code> command</td></tr>
                            </tbody>
                        </table>
                    </div>
                </section>
                
                <!-- String Operations -->
                <section id="string-ops" class="card border-0 shadow-sm mb-4">
                    <div class="card-header bg-secondary text-white py-3">
                        <h4 class="mb-0"><i class="fas fa-font me-2"></i>String Operations</h4>
                    </div>
                    <div class="card-body">
                        <table class="table table-bordered">
                            <thead class="table-light">
                                <tr><th>Operation</th><th>Redis Command</th><th>REST API</th><th>Description</th></tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>Set</td>
                                    <td><code>SET key value</code></td>
                                    <td><code>PUT /api/cache/{region}/{key}</code></td>
                                    <td>Set a string value</td>
                                </tr>
                                <tr>
                                    <td>Get</td>
                                    <td><code>GET key</code></td>
                                    <td><code>GET /api/cache/{region}/{key}</code></td>
                                    <td>Get a string value</td>
                                </tr>
                                <tr>
                                    <td>Set if not exists</td>
                                    <td><code>SETNX key value</code></td>
                                    <td>-</td>
                                    <td>Set only if key doesn't exist</td>
                                </tr>
                                <tr>
                                    <td>Set with TTL</td>
                                    <td><code>SETEX key 60 value</code></td>
                                    <td><code>PUT /api/cache/{region}/{key}</code> with <code>{"value":"...","ttl":60}</code></td>
                                    <td>Set with expiration</td>
                                </tr>
                                <tr>
                                    <td>Increment</td>
                                    <td><code>INCR key</code></td>
                                    <td>-</td>
                                    <td>Increment numeric value</td>
                                </tr>
                                <tr>
                                    <td>Decrement</td>
                                    <td><code>DECR key</code></td>
                                    <td>-</td>
                                    <td>Decrement numeric value</td>
                                </tr>
                                <tr>
                                    <td>Append</td>
                                    <td><code>APPEND key suffix</code></td>
                                    <td>-</td>
                                    <td>Append to existing string</td>
                                </tr>
                                <tr>
                                    <td>String Length</td>
                                    <td><code>STRLEN key</code></td>
                                    <td>-</td>
                                    <td>Get string length</td>
                                </tr>
                            </tbody>
                        </table>
                        
                        <h5 class="mt-4">Examples</h5>
                        <pre class="bg-dark text-light p-3 rounded"><code># Redis CLI
SET greeting "Hello, World!"
GET greeting
INCR page_views
SETEX session:token 3600 "abc123"

# REST API
curl -X PUT -d '{"value":"Hello"}' http://localhost:8080/api/cache/default/greeting
curl http://localhost:8080/api/cache/default/greeting</code></pre>
                    </div>
                </section>
                
                <!-- JSON Operations -->
                <section id="json-ops" class="card border-0 shadow-sm mb-4">
                    <div class="card-header bg-dark text-white py-3">
                        <h4 class="mb-0"><i class="fas fa-code me-2"></i>JSON Operations</h4>
                    </div>
                    <div class="card-body">
                        <p>Kuber supports storing and querying JSON documents with JSONPath expressions.</p>
                        
                        <h5>Storing JSON</h5>
                        <pre class="bg-dark text-light p-3 rounded"><code># Via Redis protocol
JSET user:1001 '{"name":"John Doe","age":30,"email":"john@example.com","roles":["admin","user"]}'

# Via REST API
curl -X PUT -H "Content-Type: application/json" \
  -d '{"name":"John Doe","age":30,"email":"john@example.com","roles":["admin","user"]}' \
  http://localhost:8080/api/cache/default/user:1001/json

# Via UI: Cache → Insert Entry → Select "JSON" type</code></pre>
                        
                        <h5 class="mt-4">Retrieving JSON</h5>
                        <pre class="bg-dark text-light p-3 rounded"><code># Get entire document
JGET user:1001
curl http://localhost:8080/api/cache/default/user:1001/json

# Get specific path
JGET user:1001 $.name
curl "http://localhost:8080/api/cache/default/user:1001/json?path=$.name"

# Get nested value
JGET user:1001 $.roles[0]</code></pre>
                        
                        <h5 class="mt-4">Searching JSON Documents</h5>
                        <p>Search across all JSON documents in a region:</p>
                        <table class="table table-bordered">
                            <thead class="table-light">
                                <tr><th>Operator</th><th>Example</th><th>Description</th></tr>
                            </thead>
                            <tbody>
                                <tr><td><code>=</code></td><td><code>$.status=active</code></td><td>Equals</td></tr>
                                <tr><td><code>!=</code></td><td><code>$.status!=inactive</code></td><td>Not equals</td></tr>
                                <tr><td><code>&gt;</code></td><td><code>$.age>25</code></td><td>Greater than</td></tr>
                                <tr><td><code>&lt;</code></td><td><code>$.price<100</code></td><td>Less than</td></tr>
                                <tr><td><code>&gt;=</code></td><td><code>$.score>=90</code></td><td>Greater or equal</td></tr>
                                <tr><td><code>&lt;=</code></td><td><code>$.rating<=5</code></td><td>Less or equal</td></tr>
                                <tr><td><code>~=</code></td><td><code>$.name~=John.*</code></td><td>Regex match</td></tr>
                                <tr><td><code>contains</code></td><td><code>$.tags contains premium</code></td><td>Array contains</td></tr>
                            </tbody>
                        </table>
                        
                        <h5 class="mt-4">Complex Queries</h5>
                        <pre class="bg-dark text-light p-3 rounded"><code># Multiple conditions (AND)
JSEARCH $.status=active,$.age>18

# REST API
curl -X POST -H "Content-Type: application/json" \
  -d '{"query":"$.category=electronics,$.price<500"}' \
  http://localhost:8080/api/cache/default/search</code></pre>
                    </div>
                </section>
                
                <!-- Hash Operations -->
                <section id="hash-ops" class="card border-0 shadow-sm mb-4">
                    <div class="card-header bg-purple text-white py-3" style="background-color: #6f42c1;">
                        <h4 class="mb-0"><i class="fas fa-hashtag me-2"></i>Hash Operations</h4>
                    </div>
                    <div class="card-body">
                        <p>Hash data structures store field-value pairs under a single key, ideal for representing objects.</p>
                        
                        <h5>Use Cases</h5>
                        <ul>
                            <li>User sessions with multiple attributes</li>
                            <li>Object properties that need individual field access</li>
                            <li>Counters grouped by category</li>
                        </ul>
                        
                        <h5 class="mt-4">Commands</h5>
                        <pre class="bg-dark text-light p-3 rounded"><code># Set fields
HSET user:1001 name "John" age "30" email "john@example.com"

# Get single field
HGET user:1001 name

# Get multiple fields
HMGET user:1001 name email

# Get all fields
HGETALL user:1001

# Check field exists
HEXISTS user:1001 phone

# Delete fields
HDEL user:1001 email

# Increment numeric field
HINCRBY user:1001 login_count 1

# List field names
HKEYS user:1001

# List values
HVALS user:1001

# Count fields
HLEN user:1001</code></pre>
                        
                        <h5 class="mt-4">REST API Examples</h5>
                        <pre class="bg-dark text-light p-3 rounded"><code># Get all hash fields
curl http://localhost:8080/api/cache/default/user:1001/hash

# Get specific field
curl http://localhost:8080/api/cache/default/user:1001/hash/name

# Set field
curl -X PUT -d '{"value":"john@new.com"}' \
  http://localhost:8080/api/cache/default/user:1001/hash/email</code></pre>
                    </div>
                </section>
                
                <!-- Key Operations -->
                <section id="key-ops" class="card border-0 shadow-sm mb-4">
                    <div class="card-header text-white py-3" style="background-color: #20c997;">
                        <h4 class="mb-0"><i class="fas fa-key me-2"></i>Key Operations</h4>
                    </div>
                    <div class="card-body">
                        <h5>Key Patterns</h5>
                        <p>Use glob patterns with the <code>KEYS</code> command:</p>
                        <table class="table table-bordered">
                            <thead class="table-light">
                                <tr><th>Pattern</th><th>Matches</th></tr>
                            </thead>
                            <tbody>
                                <tr><td><code>*</code></td><td>All keys</td></tr>
                                <tr><td><code>user:*</code></td><td>Keys starting with "user:"</td></tr>
                                <tr><td><code>*:active</code></td><td>Keys ending with ":active"</td></tr>
                                <tr><td><code>user:?</code></td><td>user:1, user:2, etc. (single char)</td></tr>
                                <tr><td><code>user:[123]</code></td><td>user:1, user:2, or user:3</td></tr>
                            </tbody>
                        </table>
                        
                        <h5 class="mt-4">Key Management</h5>
                        <pre class="bg-dark text-light p-3 rounded"><code># List keys
KEYS *                  # All keys
KEYS user:*             # User keys

# Check existence
EXISTS user:1001
EXISTS key1 key2 key3   # Returns count of existing

# Delete keys
DEL user:1001
DEL key1 key2 key3      # Delete multiple

# Get type
TYPE user:1001          # Returns: string, json, hash, etc.

# Rename
RENAME oldkey newkey</code></pre>
                    </div>
                </section>
                
                <!-- Search Operations -->
                <section id="search-ops" class="card border-0 shadow-sm mb-4">
                    <div class="card-header text-white py-3" style="background-color: #fd7e14;">
                        <h4 class="mb-0"><i class="fas fa-search me-2"></i>Search Operations</h4>
                    </div>
                    <div class="card-body">
                        <h5>KEYS vs KSEARCH</h5>
                        <table class="table table-bordered">
                            <thead class="table-light">
                                <tr><th>Feature</th><th>KEYS</th><th>KSEARCH</th></tr>
                            </thead>
                            <tbody>
                                <tr><td>Pattern Type</td><td>Glob (<code>*</code>, <code>?</code>)</td><td>Java Regex</td></tr>
                                <tr><td>Returns</td><td>Key names only</td><td>Key-value pairs with metadata</td></tr>
                                <tr><td>Format</td><td>Array of strings</td><td>Array of JSON objects</td></tr>
                            </tbody>
                        </table>
                        
                        <h5 class="mt-4">KSEARCH Examples</h5>
                        <pre class="bg-dark text-light p-3 rounded"><code># Redis Protocol
KSEARCH user:\d+                    # Match user:123, user:456
KSEARCH ^session_.*_2024$           # Session keys for 2024
KSEARCH order:[A-Z]{3}\d{4}         # Order IDs like order:ABC1234
KSEARCH .* LIMIT 50                 # All keys, limit 50

# Response format:
# [{"key":"user:123","value":"...","type":"string","ttl":-1}, ...]

# REST API
curl "http://localhost:8080/api/cache/default/ksearch?pattern=user:\d%2B&limit=100"

# Web UI: Query → Select "KSEARCH" → Enter regex pattern</code></pre>
                        
                        <h5 class="mt-4">JSEARCH Examples</h5>
                        <pre class="bg-dark text-light p-3 rounded"><code># Find active users over 18
JSEARCH $.status=active,$.age>18

# Find products under $100 in electronics
JSEARCH $.category=electronics,$.price<100

# Find names matching pattern
JSEARCH $.name~=^John.*

# Find items with specific tag
JSEARCH $.tags contains premium</code></pre>
                    </div>
                </section>
                
                <!-- TTL Operations -->
                <section id="ttl-ops" class="card border-0 shadow-sm mb-4">
                    <div class="card-header text-white py-3" style="background-color: #e83e8c;">
                        <h4 class="mb-0"><i class="fas fa-clock me-2"></i>TTL Operations</h4>
                    </div>
                    <div class="card-body">
                        <p>Time-To-Live (TTL) allows automatic expiration of cache entries.</p>
                        
                        <h5>Setting TTL</h5>
                        <pre class="bg-dark text-light p-3 rounded"><code># Set with TTL during creation
SETEX mykey 3600 "value"          # Expires in 1 hour
SET mykey "value" EX 300          # Expires in 5 minutes

# Set TTL on existing key
EXPIRE mykey 600                  # Set 10 minute TTL

# REST API
curl -X PUT -d '{"value":"temp","ttl":300}' \
  http://localhost:8080/api/cache/default/mykey

curl -X POST "http://localhost:8080/api/cache/default/mykey/expire?seconds=300"</code></pre>
                        
                        <h5 class="mt-4">Checking TTL</h5>
                        <pre class="bg-dark text-light p-3 rounded"><code># Get remaining TTL
TTL mykey                        # Returns seconds, -1 if no TTL, -2 if not exists

# View in UI: Cache → Click on key → TTL shown in details</code></pre>
                        
                        <h5 class="mt-4">Removing TTL</h5>
                        <pre class="bg-dark text-light p-3 rounded"><code># Make key persistent
PERSIST mykey

# REST API
curl -X DELETE http://localhost:8080/api/cache/default/mykey/expire</code></pre>
                        
                        <div class="alert alert-warning mt-4">
                            <i class="fas fa-exclamation-triangle me-2"></i>
                            <strong>Note:</strong> TTL cleanup runs every 60 seconds by default. Expired entries may still appear briefly until cleanup runs. Configure with <code>kuber.cache.ttl-cleanup-interval-seconds</code>.
                        </div>
                    </div>
                </section>
                
                <!-- Configuration -->
                <section id="configuration" class="card border-0 shadow-sm mb-4">
                    <div class="card-header bg-dark text-white py-3">
                        <h4 class="mb-0"><i class="fas fa-cogs me-2"></i>Configuration</h4>
                    </div>
                    <div class="card-body">
                        <p>Configure Kuber via <code>application.properties</code>:</p>
                        
                        <h5>Network Settings</h5>
                        <pre class="bg-light p-3 rounded"><code># Web server port
server.port=8080

# Redis protocol port
kuber.network.port=6380
kuber.network.bind-address=0.0.0.0
kuber.network.max-connections=1000
kuber.network.timeout-seconds=300</code></pre>
                        
                        <h5 class="mt-4">Cache Settings</h5>
                        <pre class="bg-light p-3 rounded"><code># Maximum entries in memory per region
kuber.cache.max-memory-entries=100000

# Sync writes to MongoDB (true) or async (false)
kuber.cache.persistent-mode=true

# TTL cleanup interval
kuber.cache.ttl-cleanup-interval-seconds=60

# Default TTL for entries (-1 = no expiration)
kuber.cache.default-ttl-seconds=-1

# Enable statistics collection
kuber.cache.statistics-enabled=true</code></pre>
                        
                        <h5 class="mt-4">MongoDB Settings</h5>
                        <pre class="bg-light p-3 rounded"><code>kuber.mongodb.uri=mongodb://localhost:27017
kuber.mongodb.database=kuber
kuber.mongodb.connection-pool-size=10</code></pre>
                        
                        <h5 class="mt-4">Security Settings</h5>
                        <pre class="bg-light p-3 rounded"><code># User credentials file
kuber.security.users-file=users.json

# Session timeout
kuber.security.session-timeout-seconds=3600

# Redis AUTH password (optional)
kuber.security.redis-password=</code></pre>
                        
                        <h5 class="mt-4">ZooKeeper (Replication)</h5>
                        <pre class="bg-light p-3 rounded"><code># Enable ZooKeeper-based replication
kuber.zookeeper.enabled=false
kuber.zookeeper.connect-string=localhost:2181
kuber.zookeeper.base-path=/kuber</code></pre>
                    </div>
                </section>
                
                <!-- Copyright Footer -->
                <div class="card border-0 shadow-sm mb-4">
                    <div class="card-body text-center text-muted">
                        <p class="mb-1">
                            <strong>Kuber Distributed Cache</strong> - Version 1.0.5
                        </p>
                        <p class="mb-1">
                            Copyright © 2025-2030, All Rights Reserved
                        </p>
                        <p class="mb-0">
                            Ashutosh Sinha | <a href="mailto:ajsinha@gmail.com">ajsinha@gmail.com</a>
                        </p>
                        <p class="mt-2 small">
                            <em>Patent Pending</em>
                        </p>
                    </div>
                </div>
                
            </div>
        </div>
    </div>
</main>

<footer th:replace="~{layout :: footer}"></footer>
<th:block th:replace="~{layout :: scripts}"></th:block>

<script>
    // Smooth scrolling for anchor links
    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener('click', function (e) {
            e.preventDefault();
            const target = document.querySelector(this.getAttribute('href'));
            if (target) {
                target.scrollIntoView({ behavior: 'smooth', block: 'start' });
            }
        });
    });
</script>

</body>
</html>
